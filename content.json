{"pages":[],"posts":[{"title":"安装hive","date":"2023-06-07T08:24:00.000Z","path":"wiki/安装hive/","text":"*（1）**Mysql安装* 1）卸载Centos7自带的mariadb 如果出现了mariadb-libs-5.5.64-1.el7.x86_64，输入rpm -e mariadb- libs-5.5.64-1.el7.x86_64 –nodeps,在输入rpm -qa|grep mariadb，即可 2）安装mysql 新建文件夹：mkdir &#x2F;export&#x2F;server&#x2F;mysql 上传mysql-5.7.29-1.el7.x86_64.rpm-bundle.tar到上述文件夹下，解压tar xvf mysql-5.7.29-1.el7.x86_64.rpm-bundle.tar 3）执行安装 yum -y install libaio 4）mysql初始化设置 初始化：mysqld –initialize 更改所属组：chown mysql:mysql &#x2F;var&#x2F;lib&#x2F;mysql -R 启动mysql：systemctl start mysqld.service 查看临时生成的root密码：cat &#x2F;var&#x2F;log&#x2F;mysqld.log 5）修改root密码 授权远程访问 设置开机自启动 修改root密码 设置为hadoop 授权 use mysql; GRANT ALL PRIVILEGES ON . TO ‘root‘@’%’ IDENTIFIED BY ‘hadoop’ WITH GRANT OPTION; FLUSH PRIVILEGES; mysql的启动和关闭 状态查看 （这几个命令必须记住） systemctl stop mysqld systemctl status mysqld systemctl start mysqld 设置开机自动启动：systemctl enable mysqld 查看是否设置自动启动成功 *（2）**H**ive**的安装* 1）上传安装包 解压 tar zxvf apache-hive-3.1.2-bin.tar.gz ln -s apache-hive-3.1.2-bin hive 2）解决Hive与Hadoop之间guava版本差异 cd &#x2F;export&#x2F;server&#x2F;hive&#x2F; rm -rf lib&#x2F;guava-19.0.jar cp &#x2F;export&#x2F;server&#x2F;hadoop&#x2F;share&#x2F;hadoop&#x2F;common&#x2F;lib&#x2F;guava-27.0-jre.jar .&#x2F;lib&#x2F; 3）修改配置文件 hive-env.sh cd &#x2F;export&#x2F;server&#x2F;hive&#x2F;conf mv hive-env.sh.template hive-env.sh vim hive-env.sh export HADOOP_HOME&#x3D;&#x2F;export&#x2F;server&#x2F;hadoop export HIVE_CONF_DIR&#x3D;&#x2F;export&#x2F;server&#x2F;hive&#x2F;conf export HIVE_AUX_JARS_PATH&#x3D;&#x2F;export&#x2F;server&#x2F;hive&#x2F;lib hive-site.xml vim hive-site.xml ​ javax.jdo.option.ConnectionURL ​ jdbc:mysql:&#x2F;&#x2F;node1:3306&#x2F;hive3?createDatabaseIfNotExist&#x3D;true&amp;useSSL&#x3D;false&amp;useUnicode&#x3D;true&amp;characterEncoding&#x3D;UTF-8 ​ javax.jdo.option.ConnectionDriverName ​ com.mysql.jdbc.Driver ​ javax.jdo.option.ConnectionUserName ​ root ​ javax.jdo.option.ConnectionPassword ​ hadoop hive.server2.thrift.bind.host node1 hive.metastore.uris thrift:&#x2F;&#x2F;node1:9083 hive.metastore.event.db.notification.api.auth false 4）上传mysql jdbc驱动到hive安装包lib下 mysql-connector-java-5.1.32.jar 5）初始化元数据 cd &#x2F;export&#x2F;server&#x2F;hive&#x2F; bin&#x2F;schematool -initSchema -dbType mysql -verbos 初始化成功之后会在MySQL中创建74张表 6）在hdfs创建hive存储目录（如存在则不用操作） hadoop fs -mkdir &#x2F;tmp hadoop fs -mkdir -p &#x2F;user&#x2F;hive&#x2F;warehouse hadoop fs -chmod g+w &#x2F;tmp hadoop fs -chmod g+w &#x2F;user&#x2F;hive&#x2F;warehouse 7）启动hive *（**3）**启动metastore服务* 前台启动 关闭ctrl+c &#x2F;export&#x2F;server&#x2F;hive&#x2F;bin&#x2F;hive –service metastore 前台启动开启debug日志 &#x2F;export&#x2F;server&#x2F;hive&#x2F;bin&#x2F;hive –service metastore –hiveconf hive.root.logger&#x3D;DEBUG,console 后台启动 进程挂起 关闭使用jps+ kill -9 nohup &#x2F;export&#x2F;server&#x2F;hive&#x2F;bin&#x2F;hive –service metastore &amp; *（**4）**启动hiveserver2服务* nohup &#x2F;export&#x2F;server&#x2F;hive&#x2F;bin&#x2F;hive –service hiveserver2 &amp; beeline客户端连接 拷贝node1安装包到beeline客户端机器上（node3） scp -r &#x2F;export&#x2F;server&#x2F;apache-hive-3.1.2-bin&#x2F; root@node3:&#x2F;export&#x2F;server&#x2F; *（5）**hive注释信息中文乱码解决* 以下sql语句均在mysql数据库中执行 use hivenode2; show tables; alter table hivenode2.COLUMNS_V2 modify column COMMENT varchar(256) character set utf8; alter table hivenode2.TABLE_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8; alter table hivenode2.PARTITION_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8 ; alter table hivenode2.PARTITION_KEYS modify column PKEY_COMMENT varchar(4000) character set utf8; alter table hivenode2.INDEX_PARAMS modify column PARAM_VALUE varchar(4000) character set utf8;","tags":[],"categories":[]},{"title":"Hello World","date":"2023-06-07T05:01:57.660Z","path":"wiki/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","tags":[],"categories":[]}],"categories":[],"tags":[]}